/*!
 * jquery-quiz v0.0.1 - A simple jQuery quiz plugin.
 * Copyright (c) 2023 JC Hamill - http://jchamill.github.com/jquery-quiz/
 * License: MIT
 */


!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(B){"use strict";B.quiz=function(e,t){var i=this;i.$el=B(e),i.$el.data("quiz",i),i.options=B.extend(B.quiz.defaultOptions,t);var o=i.options.questions,a=o.length,t=i.options.startScreen,n=i.$el.find(t),s=i.options.startButton,u=i.options.homeButton,r=i.options.resultsScreen,l=i.$el.find(r),c=i.options.gameOverScreen,d=i.$el.find(c),f=i.options.nextButtonText,h=i.options.finishButtonText,p=i.options.restartButtonText,q=1,v=0,m=!1,z=null,C=null,$=null,b=null,w=null,x=null,k=null,y=null,g=null;i.methods={init:function(){i.methods.setup(),i.$el.off(),i.$el.on("click",s,function(e){e.preventDefault(),i.methods.start()}),i.$el.on("click",u,function(e){e.preventDefault(),i.methods.home()}),i.$el.on("click",".answers a",function(e){e.preventDefault(),i.methods.answerQuestion(this)}),i.$el.on("click",".quiz-next-btn",function(e){e.preventDefault(),i.methods.nextQuestion()}),i.$el.on("click",".quiz-finish-btn",function(e){e.preventDefault(),i.methods.finish()}),i.$el.on("click",".quiz-restart-btn, .quiz-retry-btn",function(e){e.preventDefault(),i.methods.restart()}),i.options.initialStart&&this.start()},setup:function(){var n="";i.options.counter&&(n+='<div class="quiz-counter"></div>'),n+='<div class="questions">',B.each(o,function(e,t){n+='<div class="question-container">',n+='<p class="question">'+t.q+"</p>",n+='<ul class="answers">',B.each(t.options,function(e,t){n+='<li><a href="#" data-index="'+e+'">'+t+"</a></li>"}),n+="</ul>",n+="</div>"}),n+="</div>",0===l.length&&(n+='<div class="'+r.substr(1)+'">',n+='<p class="quiz-results"></p>',n+="</div>"),n+='<div class="quiz-controls">',n+='<p class="quiz-response"></p>',n+='<div class="quiz-buttons">',n+='<a href="#" class="quiz-next-btn">'+f+"</a>",n+='<a href="#" class="quiz-finish-btn">'+h+"</a>",n+='<a href="#" class="quiz-restart-btn">'+p+"</a>",n+="</div>",i.$el.append(n+="</div>").addClass("quiz-container quiz-start-state"),0===l.length&&(l=i.$el.find(r)),z=i.$el.find(".quiz-results"),w=i.$el.find(".quiz-controls"),x=i.$el.find(".questions"),k=i.$el.find(".quiz-counter"),y=i.$el.find(".quiz-response"),g=i.$el.find(".question-container"),C=i.$el.find(".quiz-next-btn"),$=i.$el.find(".quiz-finish-btn"),b=i.$el.find(".quiz-restart-btn"),k.hide(),g.hide(),d.hide(),l.hide(),w.hide(),"function"==typeof i.options.setupCallback&&i.options.setupCallback()},start:function(){i.$el.removeClass("quiz-start-state").addClass("quiz-questions-state"),n.hide(),w.hide(),$.hide(),b.hide(),x.show(),k.show(),g.first().show().addClass("active-question"),i.methods.updateCounter()},answerQuestion:function(e){if(!m){m=!0;var t=B(e),n="",s=t.data("index"),e=q-1;if(s===o[e].correctIndex)t.addClass("correct"),n=o[e].correctResponse,v++;else if(t.addClass("incorrect"),n=o[e].incorrectResponse,!i.options.allowIncorrect)return void i.methods.gameOver(n);q++===a&&(C.hide(),$.show()),y.html(n),w.fadeIn(),"function"==typeof i.options.answerCallback&&i.options.answerCallback(q,s,o[e])}},nextQuestion:function(){m=!1,i.$el.find(".active-question").hide().removeClass("active-question").next(".question-container").show().addClass("active-question"),w.hide(),i.methods.updateCounter(),"function"==typeof i.options.nextCallback&&i.options.nextCallback()},gameOver:function(e){var t;0===d.length&&(t="",t+='<div class="'+c.substr(1)+'">',t+='<p class="quiz-gameover-response"></p>',t+='<p><a href="#" class="quiz-retry-btn">'+p+"</a></p>",i.$el.append(t+="</div>")),i.$el.find(".quiz-gameover-response").html(e),k.hide(),x.hide(),$.hide(),d.show()},finish:function(){i.$el.removeClass("quiz-questions-state").addClass("quiz-results-state"),i.$el.find(".active-question").hide().removeClass("active-question"),k.hide(),y.hide(),$.hide(),C.hide(),b.show(),l.show();var e=i.options.resultsFormat.replace("%score",v).replace("%total",a);z.html(e),"function"==typeof i.options.finishCallback&&i.options.finishCallback()},restart:function(){i.methods.reset(),i.$el.addClass("quiz-questions-state"),x.show(),k.show(),g.first().show().addClass("active-question"),i.methods.updateCounter()},reset:function(){m=!1,q=1,v=0,i.$el.find(".answers a").removeClass("correct incorrect"),i.$el.removeClass().addClass("quiz-container"),b.hide(),d.hide(),l.hide(),w.hide(),y.show(),C.show(),k.hide(),i.$el.find(".active-question").hide().removeClass("active-question"),"function"==typeof i.options.resetCallback&&i.options.resetCallback()},home:function(){i.methods.reset(),i.$el.addClass("quiz-start-state"),n.show(),"function"==typeof i.options.homeCallback&&i.options.homeCallback()},updateCounter:function(){var e=i.options.counterFormat.replace("%current",q).replace("%total",a);k.html(e)}},i.methods.init()},B.quiz.defaultOptions={allowIncorrect:!0,counter:!0,initialStart:!1,counterFormat:"%current/%total",startScreen:".quiz-start-screen",startButton:".quiz-start-btn",homeButton:".quiz-home-btn",resultsScreen:".quiz-results-screen",resultsFormat:"You got %score out of %total correct!",gameOverScreen:".quiz-gameover-screen",nextButtonText:"Next",finishButtonText:"Finish",restartButtonText:"Restart"},B.fn.quiz=function(e){return this.each(function(){new B.quiz(this,e)})}});